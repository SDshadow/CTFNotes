## 数据类型操作

### 颜色

在IDA中，标注为代码的位置用黑色显示，标注为数据的位置用灰色显示，未定义数据用黄色

### 快捷键

**U(Undefine)** ：取消一个地方已有的数据类型定义

**D(Data)** ：让某一个位置变成数据。一直按D键，这个位置的数据将会以1字节（byte/db）、2字节（word/dw）、4字节（dword/dd）、8字节（qword/dq）进行循环

**C(Code)** ：让某一个位置变成指令，在定义为指令后，IDA会自动以此为起始位置进行递归下降反汇编。

**A(ASCLL)** ：以该位置为起点定义一个以"/0"结尾的字符串类型

*****键 ： 将此处定义为一个数组，此时会弹出一个对话框，来设置数组的类型

**O(Offset)** ：即将此处定义为一个地址偏移

### 函数操作

删除函数：在函数窗口选中函数后，按Delete键

定义函数：在反汇编窗口中选中对应行后，按P键

修改函数参数：在函数窗口选中并按Ctrl+E键，或在反汇编窗口的函数内部按Alt+P组合键

### 导航操作

后退到上一位置：Esc

前进到下一位置：Ctrl+Esc

跳转到某一个特定位置：G，然后输出地址/已经定义的名称

跳转到某一区段：快捷键Ctrl+S，然后选择区段即可

### 十六进制窗口

默认打开，可以按F2键对数据库中的数据进行修改，修改后再次按F2即可应用修改

### 切换数据显示格式

**Hexadecimal**：十六进制

**Octal**：八进制

**Char**：转成字符快捷键R

**Enum**：转为枚举中的一个值，快捷键M

**Invert sign**：将常量按补码解析为负数，快捷键为**_**

**Bitwise negate**：将常量按位取反，快捷键为~

### 类型操作

选中变量、函数后按**Y**键，弹出Please enter the type declaration

输入正确的C语言类型，IDA会解析并自动应用这个类型。

```
byte - 1字节整型，8位，char、__int8
word - 2字节整型，16位，short、__int16
dword - 4字节整型，32位，int、__int32
qword - 8字节整型，64位，__int64、long long
```

### 动态调试

F2设置断点

"Debugger--Debugger windows--Locals"打开局部变量窗口，红色代表变量的值被修改过

这里的伪代码窗口同样可以按Y键修改数据类型

### sp堆栈不平衡

1）用Option->General->Disassembly, 将选项Stack pointer打勾；
2）仔细观察每条call sub_xxxxxx前后的堆栈指针是否平衡；
3）有时还要看被调用的sub_xxxxxx内部的堆栈情况，主要是看入栈的参数与ret xx是否匹配；
4）注意观察jmp指令前后的堆栈是否有变化；
5）有时用Edit->Functions->Edit function...,然后点击OK，(按D再按C键)刷一下函数定义。
